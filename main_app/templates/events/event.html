{% extends 'base.html' %}
{% block content %}

{% if success_message %}
  <p>{{ success_message }}</p>
{% endif %}
  
<h2 style="text-align: center;">{{ event.name }}</h2>
<hr>
<div class="event-info"> 
<p><span class="keyword">Industry Focus:</span> {{ categories }}</p>
  {% if user.is_superuser %}
    <p>Add Categories:</p>
    <!-- for some reason, this form will not load for me unless I declare a form before it-->
    <!-- super weird bug that I do not understand -->
    <form action=""></form>
    <form action="{% url 'add_category' event.id %}" method="POST" id="select-form">
      {% csrf_token %}
      <select name="name" id="category-filter">
        <option value="">----</option>
      {% for category in categories_without %}
        <option value="{{category.name}}">{{category.name}}</option>
      {% endfor %}
      </select>
      <input type="submit" class="btn blue darken-3" value="Add">
    </form> 
  {% endif %}
<p><span class="keyword">Date:</span> {{ event.date }}</p>
<p><span class="keyword">Time:</span> {{ event.time }} {{ event.time_zone }}</p>
<p class="keyword">Description:</p>
<p>{{ event.description }}</p>
<p><span class="keyword">Speaker(s):</span> {{event.speaker}}</p>

{% if user.is_authenticated %}
  {% if atendee.id == request.user.id %}
    <p><span class="keyword">Location:</span> <a href="{{event.location_link}}">{{event.location_link}}</a></p>
      
    <a class="waves-effect waves-light btn red darken-1 modal-trigger" href="#modal2">Unregister</a>
  {% else%}
    <form action="{% url 'event_register' event.id %}" method="POST">
      {% csrf_token %}
      <input hidden type="text" name="action" value="register">
      <input type="submit" class="btn blue darken-3" value="Register">
    </form>
  {% endif %}
</div>

<div class="guestlist">
  <h4>Attendees</h4>
  <p>Guests</p>
  {% for guest in guests %}
    <li>{{ guest.first_name }} {{ guest.last_name }}</li>
  {% endfor %}
</div>

{% endif %}

{% if user.is_superuser %}
  <a href="{% url 'edit_event' event.name %}" class="btn blue">Edit</a>
{% endif %}

{% endblock %}